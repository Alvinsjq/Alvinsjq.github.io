---


---


如何看懂boot.S以及boot.c文件，需要做一些预备，接下里是两个参考资料：

-  [Intel 80386 Reference Programmer's Manual Table of Contents](https://pdos.csail.mit.edu/6.828/2016/readings/i386/s01_02.htm)
- [PC Assembly Language](https://pdos.csail.mit.edu/6.828/2016/readings/pcasm-book.pdf)



#### 关于80x86系列
- 8088，8086:早期PC的CPU使用，仅支持1M空间，仅在实模式（real mode）下工作。在这种模式下，程序可以访问任何内存，即使该内存是其他程序的。同时，内存被分成段，每个段不能超多64K。

- 80286:AT系列CPU使用。新特性是16位保护模式，在这个模式下可扩至16M，并且保护程序获取其他程序的内存。段依旧不能超过64K。

- 80386:提升了8028。拓展了许多寄存器能够支持32位，增加了两个新的16位寄存器FS和GS。新增加了32位的保护模式。在这种模式下，能获取4G空间。与此同时，段也能访问到4G。

#### 8086 16-bit 寄存器

- 4个16位通用寄存器一般用于数据转移和算数指令：AX，BX，CX，DX。
每个寄存器有低8位与高8位，例如AX：AH AL

- 2个16位索引寄存器，它们一般当作指针，和通用寄存器的目标类似，但是不能分为8位寄存器，它们是SI和DI。

- 16位BP和SP寄存器用来指向在机器语言栈中的数据，之后会讨论到。

- 4个段寄存器代表程序的不同部分的内存：CS代表代码段，DS代表数据段，SS代表栈段，ES代表附加段。

- 指令指针寄存器IP与CS寄存器配合使用，追踪下一条CPU执行段指令的地址。

- 标志寄存器，即FLAGS寄存器储存了之前指令结果的重要信息。

<br>
<div align="center">
    <img src="https://github.com/Alvinsjq/6.828_tasks/blob/master/screemshot/8086.png?raw=true" width = "460" height = "490" alt="8086" align=center />

<br><p align="center">图：8086寄存器</p>
</div>
<br>
#### 80386 32-bit 寄存器

在8086基础的拓展，例如将16位的AX拓展为32位。为了向后兼容，AX依旧是16位寄存器，EAX是拓展32位寄存器。AX是EAX的低16位，就像AL是AX的低8位一样。

段寄存器依旧是16位，并且增加了两个新的段寄存器：FS和GS。它们和ES一样，就是额外的寄存器（备胎）。

#### 实模式

#### 保护模式




















